(window.webpackJsonp_book_review_block=window.webpackJsonp_book_review_block||[]).push([[1],{25:function(e,t,o){}}]),function(e){function t(t){for(var r,l,i=t[0],c=t[1],s=t[2],m=0,u=[];m<i.length;m++)l=i[m],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&u.push(a[l][0]),a[l]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(b&&b(t);u.length;)u.shift()();return n.push.apply(n,s||[]),o()}function o(){for(var e,t=0;t<n.length;t++){for(var o=n[t],r=!0,i=1;i<o.length;i++){var c=o[i];0!==a[c]&&(r=!1)}r&&(n.splice(t--,1),e=l(l.s=o[0]))}return e}var r={},a={0:0},n=[];function l(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.m=e,l.c=r,l.d=function(e,t,o){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(l.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(o,r,function(t){return e[t]}.bind(null,r));return o},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var i=window.webpackJsonp_book_review_block=window.webpackJsonp_book_review_block||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var b=c;n.push([33,1]),o()}([function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wp.blockEditor},function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.wp.data},function(e,t){e.exports=window.wp.blocks},function(e,t,o){var r=o(29),a=o(30),n=o(18),l=o(31);e.exports=function(e,t){return r(e)||a(e,t)||n(e,t)||l()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=window.wp.coreData},function(e,t,o){var r=o(23);e.exports=function(e,t){if(null==e)return{};var o,a,n=r(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)o=l[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=window.lodash},function(e,t,o){var r;!function(){"use strict";var o={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var n=typeof r;if("string"===n||"number"===n)e.push(r);else if(Array.isArray(r)&&r.length){var l=a.apply(null,r);l&&e.push(l)}else if("object"===n)for(var i in r)o.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},function(e){e.exports=JSON.parse('{"name":"book-review-block/book-review","title":"Book Review","description":"Add details such as title, author, cover image, star rating and more to your book reviews.","category":"widgets","keywords":["book report","literature","literary critique","read","written work"],"textdomain":"book-review-block","attributes":{"backgroundColor":{"type":"string"},"isbn":{"type":"string"}},"editorScript":"file:../../build/index.js","editorStyle":"file:../../build/index.css","style":"file:../../build/style-index.css"}')},function(e,t){e.exports=window.regeneratorRuntime},function(e){e.exports=JSON.parse('{"name":"book-review-block/description","title":"Description","description":"Add a brief description of the book.","category":"widgets","icon":"media-text","parent":["book-review-block/book-review"],"keywords":["book","summary","synopsis"],"textdomain":"book-review-block","attributes":{"summary":{"type":"string","source":"html","selector":".book-review-block__description","multiline":"p"}},"editorScript":"file:../../../build/index.js","editorStyle":"file:../../../build/index.css","style":"file:../../../build/style-index.css"}')},function(e){e.exports=JSON.parse('{"name":"book-review-block/metadata","title":"Metadata","description":"Add book details such as title and author.","category":"widgets","icon":"info","parent":["book-review-block/book-review"],"keywords":["book","author","format","genre","pages","publisher","release date","series","source","title"],"textdomain":"book-review-block","attributes":{"author":{"type":"string","source":"html","selector":".book-review-block__meta-item-author .book-review-block__meta-item-value","default":""},"format":{"type":"string","source":"html","selector":".book-review-block__meta-item-format .book-review-block__meta-item-value","default":""},"genre":{"type":"string","source":"html","selector":".book-review-block__meta-item-genre .book-review-block__meta-item-value","default":""},"pages":{"type":"string","source":"html","selector":".book-review-block__meta-item-pages .book-review-block__meta-item-value","default":""},"publisher":{"type":"string","source":"html","selector":".book-review-block__meta-item-publisher .book-review-block__meta-item-value","default":""},"releaseDate":{"type":"string","source":"html","selector":".book-review-block__meta-item-release-date .book-review-block__meta-item-value","default":""},"series":{"type":"string","source":"html","selector":".book-review-block__meta-item-series .book-review-block__meta-item-value","default":""},"source":{"type":"string","source":"html","selector":".book-review-block__meta-item-source .book-review-block__meta-item-value","default":""},"title":{"type":"string","source":"html","selector":".book-review-block__meta-item-title .book-review-block__meta-item-value","default":""},"showLabels":{"type":"boolean","default":false}},"editorScript":"file:../../../build/index.js","editorStyle":"file:../../../build/index.css","style":"file:../../../build/style-index.css"}')},function(e){e.exports=JSON.parse('{"name":"book-review-block/rating","title":"Rating","description":"Add a star rating.","category":"widgets","icon":"star-filled","parent":["book-review-block/book-review"],"keywords":["book","star"],"textdomain":"book-review-block","attributes":{"rating":{"type":"number","default":1}},"editorScript":"file:../../../build/index.js","editorStyle":"file:../../../build/index.css","style":"file:../../../build/style-index.css"}')},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,o){var r=o(17);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,o){var r=o(26),a=o(27),n=o(18),l=o(28);e.exports=function(e){return r(e)||a(e)||n(e)||l()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function o(e,t,o,r,a,n,l){try{var i=e[n](l),c=i.value}catch(e){return void o(e)}i.done?t(c):Promise.resolve(c).then(r,a)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var l=e.apply(t,r);function i(e){o(l,a,n,i,c,"next",e)}function c(e){o(l,a,n,i,c,"throw",e)}i(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=window.wp.date},function(e,t){e.exports=window.wp.keycodes},function(e,t){e.exports=function(e,t){if(null==e)return{};var o,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||(a[o]=e[o]);return a},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,o){},,function(e,t,o){var r=o(17);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var o=[],_n=!0,r=!1,a=void 0;try{for(var n,l=e[Symbol.iterator]();!(_n=(n=l.next()).done)&&(o.push(n.value),!t||o.length!==t);_n=!0);}catch(e){r=!0,a=e}finally{try{_n||null==l.return||l.return()}finally{if(r)throw a}}return o}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=window.wp.apiFetch},function(e,t,o){"use strict";o.r(t);var r=o(7),a=o.n(r),n=o(9),l=o.n(n),i=o(5),c=o(4),s=o(0),b=(o(24),o(25),o(2)),m=o(11),u=o.n(m),p=o(10),k={attributes:{alt:{type:"string",source:"attribute",selector:"img",attribute:"alt"},author:{type:"array",source:"children",selector:".book-review-block__author"},backgroundColor:{type:"string"},format:{type:"array",source:"children",selector:".book-review-block__format"},genre:{type:"array",source:"children",selector:".book-review-block__genre"},pages:{type:"array",source:"children",selector:".book-review-block__pages"},publisher:{type:"array",source:"children",selector:".book-review-block__publisher"},rating:{type:"string"},releaseDate:{type:"array",source:"children",selector:".book-review-block__release-date"},series:{type:"array",source:"children",selector:".book-review-block__series"},source:{type:"array",source:"children",selector:".book-review-block__source"},summary:{type:"array",source:"children",selector:".book-review-block__description"},title:{type:"array",source:"children",selector:".book-review-block__title"},url:{type:"string",source:"attribute",selector:"img",attribute:"src"}},migrate:function(e){return[Object(p.pick)(e,["backgroundColor"]),[Object(i.createBlock)("core/image",{align:"left",alt:e.alt,url:e.url}),Object(i.createBlock)("book-review-block/metadata",{author:e.author,format:e.format,genre:e.genre,pages:e.pages,publisher:e.publisher,releaseDate:e.releaseDate,series:e.series,source:e.source,title:e.title}),Object(i.createBlock)("book-review-block/rating",{rating:Number(e.rating,10)}),Object(i.createBlock)("book-review-block/description",{summary:e.summary})]]},save:function(e){var t=e.attributes,o=t.alt,r=t.author,a=void 0===r?[]:r,n=t.backgroundColor,l=t.format,i=void 0===l?[]:l,c=t.genre,s=void 0===c?[]:c,b=t.pages,m=void 0===b?[]:b,p=t.publisher,k=void 0===p?[]:p,w=t.rating,v=t.releaseDate,_=void 0===v?[]:v,d=t.series,f=void 0===d?[]:d,g=t.source,h=void 0===g?[]:g,y=t.summary,O=void 0===y?[]:y,j=t.title,E=void 0===j?[]:j,x=t.url,N=u()("book-review-block",{"has-background":n}),P={backgroundColor:n};return wp.element.createElement("div",{className:N,style:P},!!x&&wp.element.createElement("div",{className:"book-review-block__cover-wrapper"},wp.element.createElement("img",{className:"book-review-block__cover",src:x,alt:o})),wp.element.createElement("div",{className:"book-review-block__details"},E.length>0&&wp.element.createElement("span",{className:"book-review-block__title"},E),f.length>0&&wp.element.createElement("span",{className:"book-review-block__series"},f),a.length>0&&wp.element.createElement("span",{className:"book-review-block__author"},a),s.length>0&&wp.element.createElement("span",{className:"book-review-block__genre"},s),k.length>0&&wp.element.createElement("span",{className:"book-review-block__publisher"},k),_.length>0&&wp.element.createElement("span",{className:"book-review-block__release-date"},_),i.length>0&&wp.element.createElement("span",{className:"book-review-block__format"},i),m.length>0&&wp.element.createElement("span",{className:"book-review-block__pages"},m),h.length>0&&wp.element.createElement("span",{className:"book-review-block__source"},h),wp.element.createElement("div",{className:"book-review-block__rating"},[{rating:5},{rating:4},{rating:3},{rating:2},{rating:1}].map((function(e){var t=e.rating;return wp.element.createElement("span",{className:w&&t<=w?"on":"off","data-rating":t,key:t},"☆")}))),O.length>0&&wp.element.createElement("div",{className:"book-review-block__description"},O)))}},w=o(19),v=o.n(w),_=o(8);function d(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function f(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(Object(o),!0).forEach((function(t){a()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var g={attributes:{alt:{type:"string",source:"attribute",selector:"img",attribute:"alt"},backgroundColor:{type:"string"},id:{type:"number"},book_review_author:{type:"string",source:"meta",meta:"book_review_author"},book_review_cover_url:{type:"string",source:"meta",meta:"book_review_cover_url"},book_review_format:{type:"string",source:"meta",meta:"book_review_format"},book_review_genre:{type:"string",source:"meta",meta:"book_review_genre"},book_review_isbn:{type:"string",source:"meta",meta:"book_review_isbn"},book_review_pages:{type:"string",source:"meta",meta:"book_review_pages"},book_review_publisher:{type:"string",source:"meta",meta:"book_review_publisher"},book_review_rating:{type:"string",source:"meta",meta:"book_review_rating"},book_review_release_date:{type:"string",source:"meta",meta:"book_review_release_date"},book_review_series:{type:"string",source:"meta",meta:"book_review_series"},book_review_source:{type:"string",source:"meta",meta:"book_review_source"},book_review_summary:{type:"string",source:"meta",meta:"book_review_summary"},book_review_title:{type:"string",source:"meta",meta:"book_review_title"}},migrate:function(e,t){return[f(f({},Object(p.pick)(e,["backgroundColor","id"])),{},{isbn:e.book_review_isbn}),[Object(i.createBlock)("core/image",{alt:e.alt,url:e.book_review_cover_url}),Object(i.createBlock)("book-review-block/metadata",{author:e.book_review_author,format:e.book_review_format,genre:e.book_review_genre,pages:e.book_review_pages,publisher:e.book_review_publisher,releaseDate:e.book_review_release_date,series:e.book_review_series,source:e.book_review_source,title:e.book_review_title}),Object(i.createBlock)("book-review-block/rating",{rating:e.book_review_rating}),Object(i.createBlock)("book-review-block/description",{summary:e.book_review_summary})].concat(v()(t))]},save:function(e){return null}},h=o(3),y=o(12),O=o(20),j=o.n(O),E=o(6),x=o.n(E),N=o(13),P=o.n(N),S=o(21),C=o(1),T=["core/image","book-review-block/metadata","book-review-block/rating","book-review-block/description"],B=[["core/image",{align:"left"}],["book-review-block/metadata"],["book-review-block/rating"],["book-review-block/description"]],D=o(14);function A(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function I(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?A(Object(o),!0).forEach((function(t){a()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):A(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var R=D.name,L=l()(D,["name"]);Object(i.registerBlockType)(R,I(I({},L),{},{edit:function(e){var t=e.attributes,o=e.setAttributes,r=t.summary,a=Object(c.useSelect)((function(e){return e("core/editor").getCurrentPostType()}),[]),n=Object(_.useEntityProp)("postType",a,"meta"),l=x()(n,1)[0];return Object(b.useEffect)((function(){l.book_review_title&&o({summary:l.book_review_summary})}),[l]),wp.element.createElement("div",{className:"book-review-block__description"},wp.element.createElement(C.RichText,{multiline:"p",onChange:function(e){return o({summary:e})},placeholder:Object(s.__)("Description"),value:r,inlineToolbar:!0,keepPlaceholderOnFocus:!0}))},save:function(e){var t=e.attributes.summary;return wp.element.createElement("div",{className:"book-review-block__description"},wp.element.createElement(C.RichText.Content,{multiline:"p",value:t}))}}));var M=o(15);function F(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function z(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?F(Object(o),!0).forEach((function(t){a()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):F(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var W=M.name,J=l()(M,["name"]);Object(i.registerBlockType)(W,z(z({},J),{},{edit:function(e){var t=e.attributes,o=e.setAttributes,r=t.author,n=t.format,l=t.genre,i=t.pages,m=t.publisher,u=t.releaseDate,p=t.series,k=t.showLabels,w=t.source,v=t.title,d=Object(c.useSelect)((function(e){return e("core/editor").getCurrentPostType()}),[]),f=Object(_.useEntityProp)("postType",d,"meta"),g=x()(f,1)[0];Object(b.useEffect)((function(){g.book_review_title&&(o({title:g.book_review_title}),o({series:g.book_review_series}),o({author:g.book_review_author}),o({genre:g.book_review_genre}),o({publisher:g.book_review_publisher}),o({releaseDate:g.book_review_release_date}),o({format:g.book_review_format}),o({pages:g.book_review_pages}),o({source:g.book_review_source}))}),[g]);var y=function(e){return function(t){o(a()({},e,t))}};return wp.element.createElement(b.Fragment,null,wp.element.createElement(C.InspectorControls,null,wp.element.createElement(h.PanelBody,{title:Object(s.__)("Content","book-review-block")},wp.element.createElement(h.ToggleControl,{label:Object(s.__)("Show labels","book-review-block"),help:Object(s.__)("Whether to show labels beside each piece of metadata","book-review-block"),checked:k,onChange:function(){return o({showLabels:!k})}}))),wp.element.createElement("div",{className:"book-review-block__meta"},wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-title"},k&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Title:","book-review-block")),wp.element.createElement(C.RichText,{placeholder:Object(s.__)("Write title…","book-review-block"),className:"book-review-block__meta-item-value",onChange:y("title"),value:v,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-series"},k&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Series:","book-review-block")),wp.element.createElement(C.RichText,{placeholder:Object(s.__)("Write series…","book-review-block"),className:"book-review-block__meta-item-value",onChange:y("series"),value:p,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-author"},k&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Author:","book-review-block")),wp.element.createElement(C.RichText,{placeholder:Object(s.__)("Write author…","book-review-block"),className:"book-review-block__meta-item-value",onChange:y("author"),value:r,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-genre"},k&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Genre:","book-review-block")),wp.element.createElement(C.RichText,{placeholder:Object(s.__)("Write genre…","book-review-block"),className:"book-review-block__meta-item-value",onChange:y("genre"),value:l,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-publisher"},k&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Publisher:","book-review-block")),wp.element.createElement(C.RichText,{placeholder:Object(s.__)("Write publisher…","book-review-block"),className:"book-review-block__meta-item-value",onChange:y("publisher"),value:m,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-release-date"},k&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Release Date:","book-review-block")),wp.element.createElement(C.RichText,{placeholder:Object(s.__)("Write release date…","book-review-block"),className:"book-review-block__meta-item-value",onChange:function(e){return o({releaseDate:e})},value:u,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-format"},k&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Format:","book-review-block")),wp.element.createElement(C.RichText,{placeholder:Object(s.__)("Write format…","book-review-block"),className:"book-review-block__meta-item-value",onChange:y("format"),value:n,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-pages"},k&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Pages:","book-review-block")),wp.element.createElement(C.RichText,{placeholder:Object(s.__)("Write pages…","book-review-block"),className:"book-review-block__meta-item-value",onChange:y("pages"),value:i,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-source"},k&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Source:","book-review-block")),wp.element.createElement(C.RichText,{placeholder:Object(s.__)("Write source…","book-review-block"),className:"book-review-block__meta-item-value",onChange:y("source"),value:w,keepPlaceholderOnFocus:!0}))))},save:function(e){var t=e.attributes,o=t.author,r=t.format,a=t.genre,n=t.pages,l=t.publisher,i=t.releaseDate,c=t.series,b=t.showLabels,m=t.source,u=t.title;return wp.element.createElement("div",{className:"book-review-block__meta"},wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-title"},b&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Title:","book-review-block")),wp.element.createElement(C.RichText.Content,{itemprop:"name",value:u,className:"book-review-block__meta-item-value",tagName:"div"})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-series"},b&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Series:","book-review-block")),wp.element.createElement(C.RichText.Content,{value:c,className:"book-review-block__meta-item-value",tagName:"div"})),wp.element.createElement("div",{itemscope:!0,itemtype:"https://schema.org/Person",itemprop:"author",className:"book-review-block__meta-item book-review-block__meta-item-author"},b&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Author:","book-review-block")),wp.element.createElement(C.RichText.Content,{itemprop:"name",value:o,className:"book-review-block__meta-item-value",tagName:"div"})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-genre"},b&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Genre:","book-review-block")),wp.element.createElement(C.RichText.Content,{itemprop:"genre",value:a,className:"book-review-block__meta-item-value",tagName:"div"})),wp.element.createElement("div",{itemscope:!0,itemtype:"https://schema.org/Organization",itemprop:"publisher",className:"book-review-block__meta-item book-review-block__meta-item-publisher"},b&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Publisher:","book-review-block")),wp.element.createElement(C.RichText.Content,{itemprop:"name",value:l,className:"book-review-block__meta-item-value",tagName:"div"})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-release-date"},b&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Release Date:","book-review-block")),wp.element.createElement(C.RichText.Content,{itemprop:"datePublished",value:i,className:"book-review-block__meta-item-value",tagName:"div"})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-format"},b&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Format:","book-review-block")),wp.element.createElement(C.RichText.Content,{value:r,className:"book-review-block__meta-item-value",tagName:"div"})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-pages"},b&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Pages:","book-review-block")),wp.element.createElement(C.RichText.Content,{itemprop:"numberOfPages",value:n,className:"book-review-block__meta-item-value",tagName:"div"})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-source"},b&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},Object(s.__)("Source:","book-review-block")),wp.element.createElement(C.RichText.Content,{value:m,className:"book-review-block__meta-item-value",tagName:"div"})))}}));var G=o(16),H=(o(32),o(22)),K=function(e){var t=function(e){return e&&e.className?e.className:""}(e);return wp.element.createElement(h.SVG,{xmlns:"https://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",color:"#eba845"},wp.element.createElement(h.Path,{className:t,fill:"#eba845",stroke:"#eba845",d:"M12,17.3l6.2,3.7l-1.6-7L22,9.2l-7.2-0.6L12,2L9.2,8.6L2,9.2L7.5,14l-1.6,7L12,17.3z"}))},U=function(e){var t,o=e.id,r=e.setRating,a=e.children;return wp.element.createElement("span",{className:"book-review-block__rating-button",role:"button",tabIndex:0,onKeyDown:(t=o,function(e){return e.keyCode===H.ENTER?r(t):null}),onClick:function(e){return function(){return r(e)}}(o)},a)};function V(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function q(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?V(Object(o),!0).forEach((function(t){a()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):V(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var Y=G.name,$=l()(G,["name"]);function Q(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function X(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(o),!0).forEach((function(t){a()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Q(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}Object(i.registerBlockType)(Y,q(q({},$),{},{edit:function(e){var t=e.attributes,o=e.setAttributes,r=t.rating,a=Object(c.useSelect)((function(e){return e("core/editor").getCurrentPostType()}),[]),n=Object(_.useEntityProp)("postType",a,"meta"),l=x()(n,1)[0];Object(b.useEffect)((function(){l.book_review_title&&o({rating:l.book_review_rating?Number(l.book_review_rating,10):1})}),[l]);var i=function(e){e===r&&Math.ceil(r)===r&&(e-=.5),o({rating:e})};return wp.element.createElement(b.Fragment,null,wp.element.createElement("div",{className:"book-review-block__rating book-review-block__review-rating"},wp.element.createElement("div",{className:"book-review-block__rating-buttons"},Object(p.range)(1,6).map((function(e){return wp.element.createElement(U,{key:e,id:e,setRating:i},wp.element.createElement("span",null,wp.element.createElement(K,{className:r>=e-.5?null:"is-rating-unfilled"})),wp.element.createElement("span",null,wp.element.createElement(K,{className:r>=e?null:"is-rating-unfilled"})))})))))},save:function(e){var t=e.attributes.rating;return wp.element.createElement("div",{itemscope:!0,itemtype:"https://schema.org/Review",itemprop:"review"},wp.element.createElement("div",{itemscope:!0,itemtype:"https://schema.org/Rating",itemprop:"reviewRating",className:"book-review-block__rating book-review-block__review-rating"},wp.element.createElement("meta",{itemprop:"ratingValue",content:t}),wp.element.createElement("div",{className:"book-review-block__rating-buttons"},Object(p.range)(1,6).map((function(e){return wp.element.createElement("span",{className:"book-review-block__rating-button",key:e,role:"button",tabIndex:0},wp.element.createElement("span",null,wp.element.createElement("svg",{xmlns:"https://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},wp.element.createElement("path",{className:t>=e-.5?null:"is-rating-unfilled",fill:"#eba845",stroke:"#eba845",d:"M12,17.3l6.2,3.7l-1.6-7L22,9.2l-7.2-0.6L12,2L9.2,8.6L2,9.2L7.5,14l-1.6,7L12,17.3z"}))),wp.element.createElement("span",null,wp.element.createElement("svg",{xmlns:"https://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},wp.element.createElement("path",{className:t>=e?null:"is-rating-unfilled",fill:"#eba845",stroke:"#eba845",d:"M12,17.3l6.2,3.7l-1.6-7L22,9.2l-7.2-0.6L12,2L9.2,8.6L2,9.2L7.5,14l-1.6,7L12,17.3z"}))))})))))}}));var Z=y.name,ee=l()(y,["name"]);Object(c.dispatch)("core").addEntities([{baseURL:"/book-review-block/v1/settings",kind:"book-review-block/v1",name:"settings"}]),Object(i.registerBlockType)(Z,X(X({},ee),{},{icon:function(e){var t=e.className;return wp.element.createElement(h.Icon,{className:t,icon:wp.element.createElement("svg",{viewBox:"0 0 24 24",xmlns:"https://www.w3.org/2000/svg"},wp.element.createElement("path",{d:"M2.3,17.3h9.3c0.1,0,0.3,0,0.4,0.1l5.9,4.2c0.3,0.2,0.7,0,0.7-0.3v-3.7c0-0.2,0.2-0.4,0.4-0.4H22 c1.1,0,2-0.9,2-2V2.5c0-1.2-0.7-2.2-2-2.2H2.3C0.7,0.2,0,0.9,0,2.5v12.3C0,16.3,0.7,17.3,2.3,17.3z"}),wp.element.createElement("polygon",{fill:"#ffffff",points:"8.8,12.1 6.5,10.9 4.1,12.1 4.5,9.5 2.6,7.6 5.3,7.2 6.5,4.8 7.6,7.2 10.3,7.6 8.4,9.5"}),wp.element.createElement("path",{fill:"#ffffff",d:"M20.7,7.9h-7c-0.5,0-0.9-0.4-0.9-0.9S13.2,6,13.7,6h7c0.5,0,0.9,0.4,0.9,0.9S21.2,7.9,20.7,7.9z"}),wp.element.createElement("path",{fill:"#ffffff",d:"M20.7,11.5h-7c-0.5,0-0.9-0.4-0.9-0.9s0.4-0.9,0.9-0.9h7c0.5,0,0.9,0.4,0.9,0.9S21.2,11.5,20.7,11.5z"}))})},supports:{align:["wide","full"]},example:{innerBlocks:[{name:"core/image",attributes:{align:"left",height:300,url:"http://books.google.com/books/content?id=sJdUAzLUNyAC&printsec=frontcover&img=1&zoom=1&source=gbs_api"}},{name:"book-review-block/metadata",attributes:{author:"Suzanne Collins",format:"Hardcover",genre:"Young Adult",pages:"374",publisher:"Scholastic Press",releaseDate:"September 14, 2008",series:"The Hunger Games #1",source:" ",title:"The Hunger Games"}},{name:"book-review-block/rating",attributes:{rating:4.5}},{name:"book-review-block/description",attributes:{summary:"<p>In a future North America, where the rulers of Panem maintain control through an annual televised survival competition pitting young people from each of the twelve districts against one another, sixteen-year-old Katniss's skills are put to the test when she voluntarily takes her younger sister's place.</p>"}}]},edit:function(e){var t=e.attributes,o=e.className,r=e.clientId,a=e.isSelected,n=e.setAttributes,l=t.backgroundColor,i=t.isbn,m=(t.url,u()(o,"book-review-block",{"has-background":l})),p=Object(b.useState)(!1),k=x()(p,2),w=k[0],v=k[1],d=Object(b.useState)(!1),f=x()(d,2),g=f[0],y=f[1],O=Object(b.useState)(!1),E=x()(O,2),N=E[0],D=E[1],A=Object(b.useState)(""),I=x()(A,2),R=I[0],L=I[1],M=Object(b.useState)(""),F=x()(M,2),z=F[0],W=F[1],J=Object(b.useState)(""),G=x()(J,2),H=G[0],K=G[1],U=Object(_.useEntityProp)("root","site","date_format"),V=x()(U,1)[0],q=Object(c.useSelect)((function(e){return e("core").getEntityRecord("book-review-block/v1","settings",void 0)}),[]),Y=wp.element.createElement(b.Fragment,null,wp.element.createElement(h.ExternalLink,{href:"https://console.developers.google.com/flows/enableapi?apiid=books.googleapis.com&keyType=CLIENT_SIDE&reusekey=true"},Object(s.__)("Get an API key.","book-review-block")),Object(s.__)("Note that changing the API key affects all Book Review blocks.","book-review-block")),$=Object(c.useSelect)((function(e){return e("core/editor").getCurrentPostType()}),[]),Q=Object(_.useEntityProp)("postType",$,"meta"),X=x()(Q,1)[0];Object(b.useEffect)((function(){q&&q.book_review_api_key&&K(q.book_review_api_key)}),[q]),Object(b.useEffect)((function(){if(X.book_review_isbn&&n({isbn:X.book_review_isbn}),X.book_review_cover_url){var e=Object(c.select)("core/block-editor").getBlocksByClientId(r);if(!e.length||!e[0].innerBlocks)return;n({url:X.book_review_cover_url}),e[0].innerBlocks.forEach((function(e){"core/image"===e.name&&Object(c.dispatch)("core/block-editor").updateBlockAttributes(e.clientId,{align:"left",url:X.book_review_cover_url})}))}}),[X]);var Z=function(){var e=j()(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://www.googleapis.com/books/v1/volumes?q=isbn:".concat(i,"&key=").concat(encodeURIComponent(H)),v(!0),D(!1),L(""),e.next=6,fetch(t).then((function(e){return e.json()})).then((function(e){var t,o;if(e){var a=null===(t=e.items)||void 0===t?void 0:t[0].volumeInfo;if(a){var n=Object(c.select)("core/block-editor").getBlocksByClientId(r);if(!n.length||!n[0].innerBlocks)return;n[0].innerBlocks.forEach((function(e){var t;switch(e.name){case"core/image":Object(c.dispatch)("core/block-editor").updateBlockAttributes(e.clientId,{url:null!==(t=a.imageLinks)&&void 0!==t&&t.thumbnail?a.imageLinks.thumbnail:""});break;case"book-review-block/metadata":Object(c.dispatch)("core/block-editor").updateBlockAttributes(e.clientId,{author:a.authors&&a.authors.length?a.authors.join():"",genre:a.categories&&a.categories.length?a.categories.join():"",pages:a.pageCount?a.pageCount.toString():"",publisher:a.publisher?a.publisher:"",releaseDate:a.publishedDate?Object(S.dateI18n)(V,a.publishedDate):"",series:"",title:a.title?a.title:""});break;case"book-review-block/description":Object(c.dispatch)("core/block-editor").updateBlockAttributes(e.clientId,{summary:a.description?a.description:""})}}))}else null!==(o=e.error)&&void 0!==o&&o.message?L(e.error.message):e.items||D(!0)}})).catch((function(e){L(e)})).finally((function(){v(!1)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return wp.element.createElement("div",{className:m,style:{backgroundColor:l}},a&&wp.element.createElement(C.InspectorControls,{key:"inspector"},wp.element.createElement(C.PanelColorSettings,{colorSettings:[{value:l&&l.value,onChange:function(e){return n({backgroundColor:e})},label:Object(s.__)("Background Color")}]}),wp.element.createElement(h.PanelBody,{title:Object(s.__)("ISBN","book-review-block"),initialOpen:!1},N&&wp.element.createElement(h.Notice,{className:"book-review-block__sidebar-notice",status:"error",isDismissible:!1},Object(s.__)("A book with that ISBN was not found.","book-review-block")),R&&wp.element.createElement(h.Notice,{className:"book-review-block__sidebar-notice",status:"error",isDismissible:!1},Object(s.__)(R,"book-review-block")),wp.element.createElement(h.TextControl,{help:Object(s.__)("Enter the ISBN to automatically fill in the book details. You will need to have an API key first.","book-review-block"),placeholder:Object(s.__)("ISBN","book-review-block"),value:i||"",onChange:function(e){return n({isbn:e})}}),wp.element.createElement("div",null,wp.element.createElement(h.Button,{isSecondary:!0,disabled:!i||!H,onClick:Z},Object(s.__)("Get Book Details","book-review-block")),w&&wp.element.createElement(h.Spinner,null))),wp.element.createElement(h.PanelBody,{title:Object(s.__)("API Key","book-review-block"),initialOpen:!1},z&&wp.element.createElement(h.Notice,{className:"book-review-block__sidebar-notice",status:"error",isDismissible:!1},Object(s.__)(z,"book-review-block")),wp.element.createElement(h.TextControl,{help:Y,placeholder:Object(s.__)("API Key","book-review-block"),value:H,onChange:function(e){return K(e)}}),wp.element.createElement("div",null,wp.element.createElement(h.Button,{isSecondary:!0,disabled:!H,onClick:function(){var e=Object(c.dispatch)("core").saveEntityRecord;y(!0),e("book-review-block/v1","settings",{book_review_api_key:H}).catch((function(e){W(e)})).finally((function(){y(!1)}))}},Object(s.__)("Save API Key","book-review-block")),g&&wp.element.createElement(h.Spinner,null)))),wp.element.createElement(C.InnerBlocks,{allowedBlocks:T,template:B}))},save:function(e){var t=e.attributes,o=t.backgroundColor,r=t.isbn,a=u()("book-review-block",{"has-background":o});return wp.element.createElement("div",{itemscope:!0,itemtype:"https://schema.org/Book",className:a,style:{backgroundColor:o}},r&&wp.element.createElement("meta",{itemprop:"isbn",content:r}),wp.element.createElement(C.InnerBlocks.Content,null))},deprecated:[k,g]}))}]);