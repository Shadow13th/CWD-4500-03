!function(){var e,t={604:function(e,t,o){"use strict";function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function l(e,t){if(null==e)return{};var o,r,l=function(e,t){if(null==e)return{};var o,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||(l[o]=e[o]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(l[o]=e[o])}return l}var a=window.wp.blocks,i=window.wp.data,n=window.wp.i18n,c=window.wp.element,s=o(184),m=o.n(s),b=window.lodash,k={attributes:{alt:{type:"string",source:"attribute",selector:"img",attribute:"alt"},author:{type:"array",source:"children",selector:".book-review-block__author"},backgroundColor:{type:"string"},format:{type:"array",source:"children",selector:".book-review-block__format"},genre:{type:"array",source:"children",selector:".book-review-block__genre"},pages:{type:"array",source:"children",selector:".book-review-block__pages"},publisher:{type:"array",source:"children",selector:".book-review-block__publisher"},rating:{type:"string"},releaseDate:{type:"array",source:"children",selector:".book-review-block__release-date"},series:{type:"array",source:"children",selector:".book-review-block__series"},source:{type:"array",source:"children",selector:".book-review-block__source"},summary:{type:"array",source:"children",selector:".book-review-block__description"},title:{type:"array",source:"children",selector:".book-review-block__title"},url:{type:"string",source:"attribute",selector:"img",attribute:"src"}},migrate:e=>[(0,b.pick)(e,["backgroundColor"]),[(0,a.createBlock)("core/image",{align:"left",alt:e.alt,url:e.url}),(0,a.createBlock)("book-review-block/metadata",{author:e.author,format:e.format,genre:e.genre,pages:e.pages,publisher:e.publisher,releaseDate:e.releaseDate,series:e.series,source:e.source,title:e.title}),(0,a.createBlock)("book-review-block/rating",{rating:Number(e.rating,10)}),(0,a.createBlock)("book-review-block/description",{summary:e.summary})]],save(e){let{attributes:t}=e;const{alt:o,author:r=[],backgroundColor:l,format:a=[],genre:i=[],pages:n=[],publisher:c=[],rating:s,releaseDate:b=[],series:k=[],source:p=[],summary:w=[],title:u=[],url:_}=t,v=m()("book-review-block",{"has-background":l}),d={backgroundColor:l};return wp.element.createElement("div",{className:v,style:d},!!_&&wp.element.createElement("div",{className:"book-review-block__cover-wrapper"},wp.element.createElement("img",{className:"book-review-block__cover",src:_,alt:o})),wp.element.createElement("div",{className:"book-review-block__details"},u.length>0&&wp.element.createElement("span",{className:"book-review-block__title"},u),k.length>0&&wp.element.createElement("span",{className:"book-review-block__series"},k),r.length>0&&wp.element.createElement("span",{className:"book-review-block__author"},r),i.length>0&&wp.element.createElement("span",{className:"book-review-block__genre"},i),c.length>0&&wp.element.createElement("span",{className:"book-review-block__publisher"},c),b.length>0&&wp.element.createElement("span",{className:"book-review-block__release-date"},b),a.length>0&&wp.element.createElement("span",{className:"book-review-block__format"},a),n.length>0&&wp.element.createElement("span",{className:"book-review-block__pages"},n),p.length>0&&wp.element.createElement("span",{className:"book-review-block__source"},p),wp.element.createElement("div",{className:"book-review-block__rating"},[{rating:5},{rating:4},{rating:3},{rating:2},{rating:1}].map((e=>{let{rating:t}=e;return wp.element.createElement("span",{className:s&&t<=s?"on":"off","data-rating":t,key:t},"â˜†")}))),w.length>0&&wp.element.createElement("div",{className:"book-review-block__description"},w)))}},p=window.wp.coreData;function w(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?w(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):w(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var _={attributes:{alt:{type:"string",source:"attribute",selector:"img",attribute:"alt"},backgroundColor:{type:"string"},id:{type:"number"},book_review_author:{type:"string",source:"meta",meta:"book_review_author"},book_review_cover_url:{type:"string",source:"meta",meta:"book_review_cover_url"},book_review_format:{type:"string",source:"meta",meta:"book_review_format"},book_review_genre:{type:"string",source:"meta",meta:"book_review_genre"},book_review_isbn:{type:"string",source:"meta",meta:"book_review_isbn"},book_review_pages:{type:"string",source:"meta",meta:"book_review_pages"},book_review_publisher:{type:"string",source:"meta",meta:"book_review_publisher"},book_review_rating:{type:"string",source:"meta",meta:"book_review_rating"},book_review_release_date:{type:"string",source:"meta",meta:"book_review_release_date"},book_review_series:{type:"string",source:"meta",meta:"book_review_series"},book_review_source:{type:"string",source:"meta",meta:"book_review_source"},book_review_summary:{type:"string",source:"meta",meta:"book_review_summary"},book_review_title:{type:"string",source:"meta",meta:"book_review_title"}},migrate:(e,t)=>[u(u({},(0,b.pick)(e,["backgroundColor","id"])),{},{isbn:e.book_review_isbn}),[(0,a.createBlock)("core/image",{alt:e.alt,url:e.book_review_cover_url}),(0,a.createBlock)("book-review-block/metadata",{author:e.book_review_author,format:e.book_review_format,genre:e.book_review_genre,pages:e.book_review_pages,publisher:e.book_review_publisher,releaseDate:e.book_review_release_date,series:e.book_review_series,source:e.book_review_source,title:e.book_review_title}),(0,a.createBlock)("book-review-block/rating",{rating:e.book_review_rating}),(0,a.createBlock)("book-review-block/description",{summary:e.book_review_summary}),...t]],save:e=>null},v=window.wp.components,d=JSON.parse('{"name":"book-review-block/book-review","title":"Book Review","description":"Add details such as title, author, cover image, star rating and more to your book reviews.","category":"widgets","keywords":["book report","literature","literary critique","read","written work"],"textdomain":"book-review-block","attributes":{"backgroundColor":{"type":"string"},"isbn":{"type":"string"}},"editorScript":"file:../../build/index.js","editorStyle":"file:../../build/index.css","style":"file:../../build/style-index.css"}'),g=window.wp.date,h=window.wp.blockEditor;const f=["core/image","book-review-block/metadata","book-review-block/rating","book-review-block/description"],y=[["core/image",{align:"left"}],["book-review-block/metadata"],["book-review-block/rating"],["book-review-block/description"]];var E=JSON.parse('{"name":"book-review-block/description","title":"Description","description":"Add a brief description of the book.","category":"widgets","icon":"media-text","parent":["book-review-block/book-review"],"keywords":["book","summary","synopsis"],"textdomain":"book-review-block","attributes":{"summary":{"type":"string","source":"html","selector":".book-review-block__description","multiline":"p"}},"editorScript":"file:../../../build/index.js","editorStyle":"file:../../../build/index.css","style":"file:../../../build/style-index.css"}');function O(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function N(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?O(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):O(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const{name:P}=E,j=l(E,["name"]);(0,a.registerBlockType)(P,N(N({},j),{},{edit:e=>{let{attributes:t,setAttributes:o}=e;const{summary:r}=t,l=(0,i.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[a]=(0,p.useEntityProp)("postType",l,"meta");return(0,c.useEffect)((()=>{a.book_review_title&&o({summary:a.book_review_summary})}),[a]),wp.element.createElement("div",{className:"book-review-block__description"},wp.element.createElement(h.RichText,{multiline:"p",onChange:e=>o({summary:e}),placeholder:(0,n.__)("Description"),value:r,inlineToolbar:!0,keepPlaceholderOnFocus:!0}))},save:e=>{let{attributes:t}=e;const{summary:o}=t;return wp.element.createElement("div",{className:"book-review-block__description"},wp.element.createElement(h.RichText.Content,{multiline:"p",value:o}))}}));var C=JSON.parse('{"name":"book-review-block/metadata","title":"Metadata","description":"Add book details such as title and author.","category":"widgets","icon":"info","parent":["book-review-block/book-review"],"keywords":["book","author","format","genre","pages","publisher","release date","series","source","title"],"textdomain":"book-review-block","attributes":{"author":{"type":"string","source":"html","selector":".book-review-block__meta-item-author .book-review-block__meta-item-value","default":""},"format":{"type":"string","source":"html","selector":".book-review-block__meta-item-format .book-review-block__meta-item-value","default":""},"genre":{"type":"string","source":"html","selector":".book-review-block__meta-item-genre .book-review-block__meta-item-value","default":""},"pages":{"type":"string","source":"html","selector":".book-review-block__meta-item-pages .book-review-block__meta-item-value","default":""},"publisher":{"type":"string","source":"html","selector":".book-review-block__meta-item-publisher .book-review-block__meta-item-value","default":""},"releaseDate":{"type":"string","source":"html","selector":".book-review-block__meta-item-release-date .book-review-block__meta-item-value","default":""},"series":{"type":"string","source":"html","selector":".book-review-block__meta-item-series .book-review-block__meta-item-value","default":""},"source":{"type":"string","source":"html","selector":".book-review-block__meta-item-source .book-review-block__meta-item-value","default":""},"title":{"type":"string","source":"html","selector":".book-review-block__meta-item-title .book-review-block__meta-item-value","default":""},"showLabels":{"type":"boolean","default":false}},"editorScript":"file:../../../build/index.js","editorStyle":"file:../../../build/index.css","style":"file:../../../build/style-index.css"}');function S(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function x(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?S(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):S(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const{name:B}=C,D=l(C,["name"]);(0,a.registerBlockType)(B,x(x({},D),{},{edit:e=>{let{attributes:t,setAttributes:o}=e;const{author:r,format:l,genre:a,pages:s,publisher:m,releaseDate:b,series:k,showLabels:w,source:u,title:_}=t,d=(0,i.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[g]=(0,p.useEntityProp)("postType",d,"meta");(0,c.useEffect)((()=>{g.book_review_title&&(o({title:g.book_review_title}),o({series:g.book_review_series}),o({author:g.book_review_author}),o({genre:g.book_review_genre}),o({publisher:g.book_review_publisher}),o({releaseDate:g.book_review_release_date}),o({format:g.book_review_format}),o({pages:g.book_review_pages}),o({source:g.book_review_source}))}),[g]);const f=e=>t=>{o({[e]:t})};return wp.element.createElement(c.Fragment,null,wp.element.createElement(h.InspectorControls,null,wp.element.createElement(v.PanelBody,{title:(0,n.__)("Content","book-review-block")},wp.element.createElement(v.ToggleControl,{label:(0,n.__)("Show labels","book-review-block"),help:(0,n.__)("Whether to show labels beside each piece of metadata","book-review-block"),checked:w,onChange:()=>o({showLabels:!w})}))),wp.element.createElement("div",{className:"book-review-block__meta"},wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-title"},w&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Title:","book-review-block")),wp.element.createElement(h.RichText,{placeholder:(0,n.__)("Write titleâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:f("title"),value:_,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-series"},w&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Series:","book-review-block")),wp.element.createElement(h.RichText,{placeholder:(0,n.__)("Write seriesâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:f("series"),value:k,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-author"},w&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Author:","book-review-block")),wp.element.createElement(h.RichText,{placeholder:(0,n.__)("Write authorâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:f("author"),value:r,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-genre"},w&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Genre:","book-review-block")),wp.element.createElement(h.RichText,{placeholder:(0,n.__)("Write genreâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:f("genre"),value:a,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-publisher"},w&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Publisher:","book-review-block")),wp.element.createElement(h.RichText,{placeholder:(0,n.__)("Write publisherâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:f("publisher"),value:m,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-release-date"},w&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Release Date:","book-review-block")),wp.element.createElement(h.RichText,{placeholder:(0,n.__)("Write release dateâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:e=>o({releaseDate:e}),value:b,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-format"},w&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Format:","book-review-block")),wp.element.createElement(h.RichText,{placeholder:(0,n.__)("Write formatâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:f("format"),value:l,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-pages"},w&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Pages:","book-review-block")),wp.element.createElement(h.RichText,{placeholder:(0,n.__)("Write pagesâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:f("pages"),value:s,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-source"},w&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Source:","book-review-block")),wp.element.createElement(h.RichText,{placeholder:(0,n.__)("Write sourceâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:f("source"),value:u,keepPlaceholderOnFocus:!0}))))},save:e=>{let{attributes:t}=e;const{author:o,format:r,genre:l,pages:a,publisher:i,releaseDate:c,series:s,showLabels:m,source:b,title:k}=t;return wp.element.createElement("div",{className:"book-review-block__meta"},wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-title"},m&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Title:","book-review-block")),wp.element.createElement(h.RichText.Content,{itemprop:"name",value:k,className:"book-review-block__meta-item-value",tagName:"div"})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-series"},m&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Series:","book-review-block")),wp.element.createElement(h.RichText.Content,{value:s,className:"book-review-block__meta-item-value",tagName:"div"})),wp.element.createElement("div",{itemscope:!0,itemtype:"https://schema.org/Person",itemprop:"author",className:"book-review-block__meta-item book-review-block__meta-item-author"},m&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Author:","book-review-block")),wp.element.createElement(h.RichText.Content,{itemprop:"name",value:o,className:"book-review-block__meta-item-value",tagName:"div"})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-genre"},m&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Genre:","book-review-block")),wp.element.createElement(h.RichText.Content,{itemprop:"genre",value:l,className:"book-review-block__meta-item-value",tagName:"div"})),wp.element.createElement("div",{itemscope:!0,itemtype:"https://schema.org/Organization",itemprop:"publisher",className:"book-review-block__meta-item book-review-block__meta-item-publisher"},m&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Publisher:","book-review-block")),wp.element.createElement(h.RichText.Content,{itemprop:"name",value:i,className:"book-review-block__meta-item-value",tagName:"div"})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-release-date"},m&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Release Date:","book-review-block")),wp.element.createElement(h.RichText.Content,{itemprop:"datePublished",value:c,className:"book-review-block__meta-item-value",tagName:"div"})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-format"},m&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Format:","book-review-block")),wp.element.createElement(h.RichText.Content,{value:r,className:"book-review-block__meta-item-value",tagName:"div"})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-pages"},m&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Pages:","book-review-block")),wp.element.createElement(h.RichText.Content,{itemprop:"numberOfPages",value:a,className:"book-review-block__meta-item-value",tagName:"div"})),wp.element.createElement("div",{className:"book-review-block__meta-item book-review-block__meta-item-source"},m&&wp.element.createElement("span",{className:"book-review-block__meta-item-label"},(0,n.__)("Source:","book-review-block")),wp.element.createElement(h.RichText.Content,{value:b,className:"book-review-block__meta-item-value",tagName:"div"})))}}));var T=JSON.parse('{"name":"book-review-block/rating","title":"Rating","description":"Add a star rating.","category":"widgets","icon":"star-filled","parent":["book-review-block/book-review"],"keywords":["book","star"],"textdomain":"book-review-block","attributes":{"rating":{"type":"number","default":1}},"editorScript":"file:../../../build/index.js","editorStyle":"file:../../../build/index.css","style":"file:../../../build/style-index.css"}'),R=(window.wp.apiFetch,window.wp.keycodes);const I=e=>{const t=(e=>e&&e.className?e.className:"")(e);return wp.element.createElement(v.SVG,{xmlns:"https://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",color:"#eba845"},wp.element.createElement(v.Path,{className:t,fill:"#eba845",stroke:"#eba845",d:"M12,17.3l6.2,3.7l-1.6-7L22,9.2l-7.2-0.6L12,2L9.2,8.6L2,9.2L7.5,14l-1.6,7L12,17.3z"}))},L=e=>{let{id:t,setRating:o,children:r}=e;return wp.element.createElement("span",{className:"book-review-block__rating-button",role:"button",tabIndex:0,onKeyDown:(l=t,e=>{let{keyCode:t}=e;return t===R.ENTER?o(l):null}),onClick:(e=>()=>o(e))(t)},r);var l};function A(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function F(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?A(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):A(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const{name:z}=T,W=l(T,["name"]);function M(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function G(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?M(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):M(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}(0,a.registerBlockType)(z,F(F({},W),{},{edit:e=>{let{attributes:t,setAttributes:o}=e;const{rating:r}=t,l=(0,i.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[a]=(0,p.useEntityProp)("postType",l,"meta");(0,c.useEffect)((()=>{a.book_review_title&&o({rating:a.book_review_rating?Number(a.book_review_rating,10):1})}),[a]);const n=e=>{e===r&&Math.ceil(r)===r&&(e-=.5),o({rating:e})};return wp.element.createElement(c.Fragment,null,wp.element.createElement("div",{className:"book-review-block__rating book-review-block__review-rating"},wp.element.createElement("div",{className:"book-review-block__rating-buttons"},(0,b.range)(1,6).map((e=>wp.element.createElement(L,{key:e,id:e,setRating:n},wp.element.createElement("span",null,wp.element.createElement(I,{className:r>=e-.5?null:"is-rating-unfilled"})),wp.element.createElement("span",null,wp.element.createElement(I,{className:r>=e?null:"is-rating-unfilled"}))))))))},save:e=>{let{attributes:t}=e;const{rating:o}=t;return wp.element.createElement("div",{itemscope:!0,itemtype:"https://schema.org/Review",itemprop:"review"},wp.element.createElement("div",{itemscope:!0,itemtype:"https://schema.org/Rating",itemprop:"reviewRating",className:"book-review-block__rating book-review-block__review-rating"},wp.element.createElement("meta",{itemprop:"ratingValue",content:o}),wp.element.createElement("div",{className:"book-review-block__rating-buttons"},(0,b.range)(1,6).map((e=>wp.element.createElement("span",{className:"book-review-block__rating-button",key:e,role:"button",tabIndex:0},wp.element.createElement("span",null,wp.element.createElement("svg",{xmlns:"https://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},wp.element.createElement("path",{className:o>=e-.5?null:"is-rating-unfilled",fill:"#eba845",stroke:"#eba845",d:"M12,17.3l6.2,3.7l-1.6-7L22,9.2l-7.2-0.6L12,2L9.2,8.6L2,9.2L7.5,14l-1.6,7L12,17.3z"}))),wp.element.createElement("span",null,wp.element.createElement("svg",{xmlns:"https://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},wp.element.createElement("path",{className:o>=e?null:"is-rating-unfilled",fill:"#eba845",stroke:"#eba845",d:"M12,17.3l6.2,3.7l-1.6-7L22,9.2l-7.2-0.6L12,2L9.2,8.6L2,9.2L7.5,14l-1.6,7L12,17.3z"})))))))))}}));const{name:H}=d,J=l(d,["name"]);(0,i.dispatch)("core").addEntities([{baseURL:"/book-review-block/v1/settings",kind:"book-review-block/v1",name:"settings"}]),(0,a.registerBlockType)(H,G(G({},J),{},{icon:e=>{let{className:t}=e;return wp.element.createElement(v.Icon,{className:t,icon:wp.element.createElement("svg",{viewBox:"0 0 24 24",xmlns:"https://www.w3.org/2000/svg"},wp.element.createElement("path",{d:"M2.3,17.3h9.3c0.1,0,0.3,0,0.4,0.1l5.9,4.2c0.3,0.2,0.7,0,0.7-0.3v-3.7c0-0.2,0.2-0.4,0.4-0.4H22 c1.1,0,2-0.9,2-2V2.5c0-1.2-0.7-2.2-2-2.2H2.3C0.7,0.2,0,0.9,0,2.5v12.3C0,16.3,0.7,17.3,2.3,17.3z"}),wp.element.createElement("polygon",{fill:"#ffffff",points:"8.8,12.1 6.5,10.9 4.1,12.1 4.5,9.5 2.6,7.6 5.3,7.2 6.5,4.8 7.6,7.2 10.3,7.6 8.4,9.5"}),wp.element.createElement("path",{fill:"#ffffff",d:"M20.7,7.9h-7c-0.5,0-0.9-0.4-0.9-0.9S13.2,6,13.7,6h7c0.5,0,0.9,0.4,0.9,0.9S21.2,7.9,20.7,7.9z"}),wp.element.createElement("path",{fill:"#ffffff",d:"M20.7,11.5h-7c-0.5,0-0.9-0.4-0.9-0.9s0.4-0.9,0.9-0.9h7c0.5,0,0.9,0.4,0.9,0.9S21.2,11.5,20.7,11.5z"}))})},supports:{align:["wide","full"]},example:{innerBlocks:[{name:"core/image",attributes:{align:"left",height:300,url:"http://books.google.com/books/content?id=sJdUAzLUNyAC&printsec=frontcover&img=1&zoom=1&source=gbs_api"}},{name:"book-review-block/metadata",attributes:{author:"Suzanne Collins",format:"Hardcover",genre:"Young Adult",pages:"374",publisher:"Scholastic Press",releaseDate:"September 14, 2008",series:"The Hunger Games #1",source:" ",title:"The Hunger Games"}},{name:"book-review-block/rating",attributes:{rating:4.5}},{name:"book-review-block/description",attributes:{summary:"<p>In a future North America, where the rulers of Panem maintain control through an annual televised survival competition pitting young people from each of the twelve districts against one another, sixteen-year-old Katniss's skills are put to the test when she voluntarily takes her younger sister's place.</p>"}}]},edit:function(e){let{attributes:t,className:o,clientId:r,isSelected:l,setAttributes:a}=e;const{backgroundColor:s,isbn:b,url:k}=t,w=m()(o,"book-review-block",{"has-background":s}),[u,_]=(0,c.useState)(!1),[d,E]=(0,c.useState)(!1),[O,N]=(0,c.useState)(!1),[P,j]=(0,c.useState)(""),[C,S]=(0,c.useState)(""),[x,B]=(0,c.useState)(""),[D]=(0,p.useEntityProp)("root","site","date_format"),T=(0,i.useSelect)((e=>e("core").getEntityRecord("book-review-block/v1","settings",void 0)),[]),R=wp.element.createElement(c.Fragment,null,wp.element.createElement(v.ExternalLink,{href:"https://console.developers.google.com/flows/enableapi?apiid=books.googleapis.com&keyType=CLIENT_SIDE&reusekey=true"},(0,n.__)("Get an API key.","book-review-block")),(0,n.__)("Note that changing the API key affects all Book Review blocks.","book-review-block")),I=(0,i.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[L]=(0,p.useEntityProp)("postType",I,"meta");return(0,c.useEffect)((()=>{T&&T.book_review_api_key&&B(T.book_review_api_key)}),[T]),(0,c.useEffect)((()=>{if(L.book_review_isbn&&a({isbn:L.book_review_isbn}),L.book_review_cover_url){const e=(0,i.select)("core/block-editor").getBlocksByClientId(r);if(!e.length||!e[0].innerBlocks)return;a({url:L.book_review_cover_url}),e[0].innerBlocks.forEach((e=>{"core/image"===e.name&&(0,i.dispatch)("core/block-editor").updateBlockAttributes(e.clientId,{align:"left",url:L.book_review_cover_url})}))}}),[L]),wp.element.createElement("div",{className:w,style:{backgroundColor:s}},l&&wp.element.createElement(h.InspectorControls,{key:"inspector"},wp.element.createElement(h.PanelColorSettings,{colorSettings:[{value:s&&s.value,onChange:e=>a({backgroundColor:e}),label:(0,n.__)("Background Color")}]}),wp.element.createElement(v.PanelBody,{title:(0,n.__)("ISBN","book-review-block"),initialOpen:!1},O&&wp.element.createElement(v.Notice,{className:"book-review-block__sidebar-notice",status:"error",isDismissible:!1},(0,n.__)("A book with that ISBN was not found.","book-review-block")),P&&wp.element.createElement(v.Notice,{className:"book-review-block__sidebar-notice",status:"error",isDismissible:!1},(0,n.__)(P,"book-review-block")),wp.element.createElement(v.TextControl,{help:(0,n.__)("Enter the ISBN to automatically fill in the book details. You will need to have an API key first.","book-review-block"),placeholder:(0,n.__)("ISBN","book-review-block"),value:b||"",onChange:e=>a({isbn:e})}),wp.element.createElement("div",null,wp.element.createElement(v.Button,{isSecondary:!0,disabled:!b||!x,onClick:async()=>{const e=`https://www.googleapis.com/books/v1/volumes?q=isbn:${b}&key=${encodeURIComponent(x)}`;_(!0),N(!1),j(""),await fetch(e).then((e=>e.json())).then((e=>{var t,o;if(!e)return;const l=null===(t=e.items)||void 0===t?void 0:t[0].volumeInfo;if(l){const e=(0,i.select)("core/block-editor").getBlocksByClientId(r);if(!e.length||!e[0].innerBlocks)return;e[0].innerBlocks.forEach((e=>{var t;switch(e.name){case"core/image":(0,i.dispatch)("core/block-editor").updateBlockAttributes(e.clientId,{url:null!==(t=l.imageLinks)&&void 0!==t&&t.thumbnail?l.imageLinks.thumbnail:""});break;case"book-review-block/metadata":(0,i.dispatch)("core/block-editor").updateBlockAttributes(e.clientId,{author:l.authors&&l.authors.length?l.authors.join():"",genre:l.categories&&l.categories.length?l.categories.join():"",pages:l.pageCount?l.pageCount.toString():"",publisher:l.publisher?l.publisher:"",releaseDate:l.publishedDate?(0,g.dateI18n)(D,l.publishedDate):"",series:"",title:l.title?l.title:""});break;case"book-review-block/description":(0,i.dispatch)("core/block-editor").updateBlockAttributes(e.clientId,{summary:l.description?"<p>"+l.description+"</p>":""})}}))}else null!==(o=e.error)&&void 0!==o&&o.message?j(e.error.message):e.items||N(!0)})).catch((e=>{j(e)})).finally((()=>{_(!1)}))}},(0,n.__)("Get Book Details","book-review-block")),u&&wp.element.createElement(v.Spinner,null))),wp.element.createElement(v.PanelBody,{title:(0,n.__)("API Key","book-review-block"),initialOpen:!1},C&&wp.element.createElement(v.Notice,{className:"book-review-block__sidebar-notice",status:"error",isDismissible:!1},(0,n.__)(C,"book-review-block")),wp.element.createElement(v.TextControl,{help:R,placeholder:(0,n.__)("API Key","book-review-block"),value:x,onChange:e=>B(e)}),wp.element.createElement("div",null,wp.element.createElement(v.Button,{isSecondary:!0,disabled:!x,onClick:()=>{const{saveEntityRecord:e}=(0,i.dispatch)("core");E(!0),e("book-review-block/v1","settings",{book_review_api_key:x}).catch((e=>{S(e)})).finally((()=>{E(!1)}))}},(0,n.__)("Save API Key","book-review-block")),d&&wp.element.createElement(v.Spinner,null)))),wp.element.createElement(h.InnerBlocks,{allowedBlocks:f,template:y}))},save:e=>{let{attributes:t}=e;const{backgroundColor:o,isbn:r}=t,l=m()("book-review-block",{"has-background":o});return wp.element.createElement("div",{itemscope:!0,itemtype:"https://schema.org/Book",className:l,style:{backgroundColor:o}},r&&wp.element.createElement("meta",{itemprop:"isbn",content:r}),wp.element.createElement(h.InnerBlocks.Content,null))},deprecated:[k,_]}))},184:function(e,t){var o;!function(){"use strict";var r={}.hasOwnProperty;function l(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var a=typeof o;if("string"===a||"number"===a)e.push(o);else if(Array.isArray(o)){if(o.length){var i=l.apply(null,o);i&&e.push(i)}}else if("object"===a)if(o.toString===Object.prototype.toString)for(var n in o)r.call(o,n)&&o[n]&&e.push(n);else e.push(o.toString())}}return e.join(" ")}e.exports?(l.default=l,e.exports=l):void 0===(o=function(){return l}.apply(t,[]))||(e.exports=o)}()}},o={};function r(e){var l=o[e];if(void 0!==l)return l.exports;var a=o[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=function(t,o,l,a){if(!o){var i=1/0;for(m=0;m<e.length;m++){o=e[m][0],l=e[m][1],a=e[m][2];for(var n=!0,c=0;c<o.length;c++)(!1&a||i>=a)&&Object.keys(r.O).every((function(e){return r.O[e](o[c])}))?o.splice(c--,1):(n=!1,a<i&&(i=a));if(n){e.splice(m--,1);var s=l();void 0!==s&&(t=s)}}return t}a=a||0;for(var m=e.length;m>0&&e[m-1][2]>a;m--)e[m]=e[m-1];e[m]=[o,l,a]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,a,i=o[0],n=o[1],c=o[2],s=0;if(i.some((function(t){return 0!==e[t]}))){for(l in n)r.o(n,l)&&(r.m[l]=n[l]);if(c)var m=c(r)}for(t&&t(o);s<i.length;s++)a=i[s],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(m)},o=self.webpackChunkbook_review_block=self.webpackChunkbook_review_block||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var l=r.O(void 0,[431],(function(){return r(604)}));l=r.O(l)}();